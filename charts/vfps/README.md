# vfps

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

A Helm chart for deploying VFPS, a very fast and resource-efficient pseudonym service.

**Homepage:** <https://github.com/chgl/vfps>

## Installation

```sh
helm repo add chgl https://chgl.github.io/charts
helm repo update
helm install --create-namespace vfps chgl/vfps -n vfps
```

> **Warning**
> By default, the included [PostgreSQL Helm chart](https://github.com/bitnami/charts/tree/master/bitnami/postgresql#upgrading)
> auto-generates a random password for the database which may cause problems when upgrading the chart (see [here for details](https://github.com/bitnami/charts/tree/master/bitnami/postgresql#upgrading)).

## Values

| Key                                           | Type   | Default                            | Description                                                                                                                                                                                                                       |
| --------------------------------------------- | ------ | ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| affinity                                      | object | `{}`                               | pod affinity                                                                                                                                                                                                                      |
| autoscaling.enabled                           | bool   | `false`                            | enable horizontal pod autoscaling                                                                                                                                                                                                 |
| autoscaling.maxReplicas                       | int    | `100`                              |                                                                                                                                                                                                                                   |
| autoscaling.minReplicas                       | int    | `1`                                |                                                                                                                                                                                                                                   |
| autoscaling.targetCPUUtilizationPercentage    | int    | `80`                               |                                                                                                                                                                                                                                   |
| database.additionalConnectionStringParameters | string | `"Timeout=60;Max Auto Prepare=5;"` | additional parameters appended to the connection string                                                                                                                                                                           |
| database.database                             | string | `"vfps"`                           | name of the database inside. If postgresql.enabled=true, then postgresql.postgresqlDatabase is used                                                                                                                               |
| database.existingSecret                       | string | `""`                               | name of an existing secret containing the password to the DB.                                                                                                                                                                     |
| database.existingSecretKey                    | string | `"postgresql-postgres-password"`   | name of the key in `webApi.db.existingSecret` to use as the password to the DB.                                                                                                                                                   |
| database.host                                 | string | `"host.example.com"`               | database hostname of an external database. Only used if `postgresql.enabled` is set to `false`.                                                                                                                                   |
| database.password                             | string | `"postgres"`                       | the database password. Only used if postgresql.enabled=false, otherwise the secret created by the postgresql chart is used                                                                                                        |
| database.port                                 | int    | `5432`                             | port used to connect to the postgres DB                                                                                                                                                                                           |
| database.schema                               | string | `"vfps"`                           | schema used for the tables.                                                                                                                                                                                                       |
| database.username                             | string | `"postgres"`                       | username used to connect to the DB. Note that this name is currently used even if postgresql.enabled=true                                                                                                                         |
| extraEnv                                      | list   | `[]`                               | extra environment variables to set on the vfps api container                                                                                                                                                                      |
| fullnameOverride                              | string | `""`                               | override the full release name                                                                                                                                                                                                    |
| imagePullSecrets                              | list   | `[]`                               | image pull secrets used by the main deployment container                                                                                                                                                                          |
| ingress.annotations                           | object | `{}`                               | extra annotations to apply to the Ingress resource                                                                                                                                                                                |
| ingress.className                             | string | `""`                               | ingressClassName to use                                                                                                                                                                                                           |
| ingress.enabled                               | bool   | `false`                            | create an Ingress for the application                                                                                                                                                                                             |
| ingress.hosts[0].host                         | string | `"vfps.127.0.0.1.nip.io"`          |                                                                                                                                                                                                                                   |
| ingress.hosts[0].paths[0].path                | string | `"/"`                              |                                                                                                                                                                                                                                   |
| ingress.hosts[0].paths[0].pathType            | string | `"ImplementationSpecific"`         |                                                                                                                                                                                                                                   |
| ingress.hosts[0].paths[0].portName            | string | `"http"`                           |                                                                                                                                                                                                                                   |
| ingress.tls                                   | list   | `[]`                               | TLS configuration                                                                                                                                                                                                                 |
| migrationsJob.enabled                         | bool   | `true`                             | whether to enable the database migration job. If enabled, a `ServiceAccount`, `Role`, and `RoleBinding` resources are created which are used by an init container of the main application to wait for the migrations to complete. |
| migrationsJob.extraEnv                        | list   | `[]`                               | extra environment variables to set on the migrations job container                                                                                                                                                                |
| migrationsJob.restartPolicy                   | string | `"Never"`                          | restart policy for the migration job                                                                                                                                                                                              |
| nameOverride                                  | string | `""`                               | override the release name                                                                                                                                                                                                         |
| nodeSelector                                  | object | `{}`                               | pod node selector                                                                                                                                                                                                                 |
| podAnnotations                                | object | `{}`                               |                                                                                                                                                                                                                                   |
| podDisruptionBudget.enabled                   | bool   | `false`                            | create a PodDisruptionBudget resource                                                                                                                                                                                             |
| podDisruptionBudget.maxUnavailable            | string | `""`                               | Maximum unavailable instances; ignored if there is no PodDisruptionBudget                                                                                                                                                         |
| podDisruptionBudget.minAvailable              | int    | `1`                                | Minimum available instances; ignored if there is no PodDisruptionBudget                                                                                                                                                           |
| podSecurityContext                            | object | `{}`                               | the pod security context                                                                                                                                                                                                          |
| replicaCount                                  | int    | `1`                                | number of replicas                                                                                                                                                                                                                |
| resources                                     | object | `{}`                               | resource limits and requests                                                                                                                                                                                                      |
| service.grpcPort                              | int    | `8081`                             | the port which supports HTTP2 only, to accept plaintext gRPC calls                                                                                                                                                                |
| service.port                                  | int    | `8080`                             | the port for the main endpoint which supports HTTP1, HTTP2, and HTTP3                                                                                                                                                             |
| service.type                                  | string | `"ClusterIP"`                      | the type of service                                                                                                                                                                                                               |
| serviceAccount.annotations                    | object | `{}`                               | Annotations to add to the service account                                                                                                                                                                                         |
| serviceAccount.create                         | bool   | `false`                            | Specifies whether a service account should be created.                                                                                                                                                                            |
| serviceAccount.name                           | string | `""`                               | The name of the service account to use. If not set and create is true, a name is generated using the fullname template                                                                                                            |
| serviceMonitor.additionalLabels               | object | `{}`                               | additional labels to apply to the ServiceMonitor object, e.g. `release: prometheus`                                                                                                                                               |
| serviceMonitor.enabled                        | bool   | `false`                            | if enabled, creates a ServiceMonitor instance for Prometheus Operator-based monitoring                                                                                                                                            |
| tolerations                                   | list   | `[]`                               | pod tolerations                                                                                                                                                                                                                   |
| topologySpreadConstraints                     | list   | `[]`                               | pod topology spread configuration see: <https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#api>                                                                                                  |

---

Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)
