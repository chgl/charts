# pathling-server

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

A Helm chart for deploying the Pathling server

**Homepage:** <https://pathling.csiro.au/docs/server>

## Installation

```console
helm install pathling-server oci://ghcr.io/chgl/charts/pathling-server --create-namespace -n pathling-server
```

## Values

| Key                                                  | Type   | Default                                                                                                                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ---------------------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| affinity                                             | object | `{}`                                                                                                                                        | affinity for pods assignment see: <https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity>                                                                                                                                                                                                                                                                                                                                      |
| autoscaling.enabled                                  | bool   | `false`                                                                                                                                     | enable horizontal pod autoscaling                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| autoscaling.maxReplicas                              | int    | `5`                                                                                                                                         | upper limit for the number of pods that can be set by the autoscaler; cannot be smaller than `minReplicas`.                                                                                                                                                                                                                                                                                                                                                            |
| autoscaling.minReplicas                              | int    | `1`                                                                                                                                         | minReplicas is the lower limit for the number of replicas to which the autoscaler can scale down. It defaults to 1 pod. minReplicas is allowed to be 0 if the alpha feature gate HPAScaleToZero is enabled and at least one Object or External metric is configured. Scaling is active as long as at least one metric value is available.                                                                                                                              |
| autoscaling.targetCPUUtilizationPercentage           | int    | `80`                                                                                                                                        | target average CPU utilization (represented as a percentage of requested CPU) over all the pods; if not specified the default autoscaling policy will be used.                                                                                                                                                                                                                                                                                                         |
| deployment.updateStrategy                            | object | `{"type":"Recreate"}`                                                                                                                       | Deployment strategy type <https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies>                                                                                                                                                                                                                                                                                                                                                    |
| deploymentAnnotations                                | object | `{}`                                                                                                                                        | metadata.annotations to apply to the deployment                                                                                                                                                                                                                                                                                                                                                                                                                        |
| extraEnv                                             | list   | `[]`                                                                                                                                        | extra environment variables to apply to the container                                                                                                                                                                                                                                                                                                                                                                                                                  |
| fullnameOverride                                     | string | `""`                                                                                                                                        | String to fully override fullname template                                                                                                                                                                                                                                                                                                                                                                                                                             |
| imagePullSecrets                                     | list   | `[]`                                                                                                                                        | image pull secrets                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ingress.annotations                                  | object | `{}`                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.className                                    | string | `""`                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.enabled                                      | bool   | `false`                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.hosts[0].host                                | string | `"pathling-server.127.0.0.1.nip.io"`                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.hosts[0].paths[0].path                       | string | `"/"`                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.hosts[0].paths[0].pathType                   | string | `"ImplementationSpecific"`                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.hosts[0].paths[0].portName                   | string | `"http"`                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ingress.tls                                          | list   | `[]`                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| metrics.serviceMonitor.additionalLabels              | object | `{}`                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| metrics.serviceMonitor.enabled                       | bool   | `false`                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| minio.defaultBuckets                                 | string | `"pathling-warehouse"`                                                                                                                      | create a bucket used for the pathling server warehouse by default. See `warehouse.url`.                                                                                                                                                                                                                                                                                                                                                                                |
| minio.enabled                                        | bool   | `true`                                                                                                                                      | set to `true` to enable the included minio sub-chart and auto-configure the server to use it for storage                                                                                                                                                                                                                                                                                                                                                               |
| nameOverride                                         | string | `""`                                                                                                                                        | String to partially override fullname template (will maintain the release name)                                                                                                                                                                                                                                                                                                                                                                                        |
| nodeSelector                                         | object | `{}`                                                                                                                                        | node labels for pods assignment see: <https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/>                                                                                                                                                                                                                                                                                                                                                        |
| podAnnotations                                       | object | `{}`                                                                                                                                        | pod annotations                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| podDisruptionBudget.enabled                          | bool   | `false`                                                                                                                                     | create a PodDisruptionBudget resource                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| podDisruptionBudget.maxUnavailable                   | string | `""`                                                                                                                                        | Maximum unavailable instances; ignored if there is no PodDisruptionBudget                                                                                                                                                                                                                                                                                                                                                                                              |
| podDisruptionBudget.minAvailable                     | int    | `1`                                                                                                                                         | Minimum available instances; ignored if there is no PodDisruptionBudget                                                                                                                                                                                                                                                                                                                                                                                                |
| podSecurityContext                                   | object | `{}`                                                                                                                                        | the pod security context                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| replicaCount                                         | int    | `1`                                                                                                                                         | number of replicas. This components can also be easily scaled horizontally if necessary.                                                                                                                                                                                                                                                                                                                                                                               |
| resources                                            | object | `{}`                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| service                                              | object | `{"metrics":{"port":8081},"port":8080,"spark":{"blockManager":{"port":7078},"driver":{"port":7077},"ui":{"port":4040}},"type":"ClusterIP"}` | service used to expose the API                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| service.port                                         | int    | `8080`                                                                                                                                      | service port                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| service.spark.blockManager.port                      | int    | `7078`                                                                                                                                      | service port for the Spark block manager                                                                                                                                                                                                                                                                                                                                                                                                                               |
| service.spark.driver.port                            | int    | `7077`                                                                                                                                      | service port for the Spark driver                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| service.spark.ui.port                                | int    | `4040`                                                                                                                                      | service port for the Spark UI                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| service.type                                         | string | `"ClusterIP"`                                                                                                                               | type of service                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| serviceAccount.annotations                           | object | `{}`                                                                                                                                        | Annotations to add to the service account                                                                                                                                                                                                                                                                                                                                                                                                                              |
| serviceAccount.automountServiceAccountToken          | bool   | `true`                                                                                                                                      | whether to automount the SA token                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| serviceAccount.create                                | bool   | `true`                                                                                                                                      | Specifies whether a service account should be created. Used to setup Spark executor pods if `spark.cluster.enabled=true`.                                                                                                                                                                                                                                                                                                                                              |
| serviceAccount.name                                  | string | `""`                                                                                                                                        | The name of the service account to use. If not set and create is true, a name is generated using the fullname template                                                                                                                                                                                                                                                                                                                                                 |
| spark.cluster.enabled                                | bool   | `true`                                                                                                                                      | enable clustered mode for the Spark deployment. The Pathling server acts as the driver.                                                                                                                                                                                                                                                                                                                                                                                |
| spark.cluster.executor.instances                     | int    | `3`                                                                                                                                         | number of executor instances                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| spark.cluster.executor.limit.cores                   | string | `""`                                                                                                                                        | Specify a hard cpu limit for each executor pod launched for the Spark Application.                                                                                                                                                                                                                                                                                                                                                                                     |
| spark.cluster.executor.limit.memory                  | string | `""`                                                                                                                                        | executor pod container memory limits                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| spark.cluster.executor.memory                        | string | `"1g"`                                                                                                                                      | Amount of memory to use per executor process, in the same format as JVM memory strings with a size unit suffix ("k", "m", "g" or "t") (e.g. 512m, 2g).                                                                                                                                                                                                                                                                                                                 |
| spark.cluster.executor.podTemplate                   | object | `{}`                                                                                                                                        | executor pod template. Stored as YAML and mounted as a file specified in `spark.kubernetes.executor.podTemplateFile`.                                                                                                                                                                                                                                                                                                                                                  |
| spark.cluster.executor.request.cores                 | string | `""`                                                                                                                                        | Specify the cpu request for each executor pod. Values conform to the Kubernetes convention. Example values include 0.1, 500m, 1.5, 5, etc., with the definition of cpu units documented in CPU units. This is distinct from spark.executor.cores: it is only used and takes precedence over spark.executor.cores for specifying the executor pod cpu request if set. Task parallelism, e.g., number of tasks an executor can run concurrently is not affected by this. |
| spark.cluster.executor.request.memory                | string | `""`                                                                                                                                        | executor pod container memory requests                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| spark.cluster.masterUrl                              | string | `"k8s://https://kubernetes.default.svc"`                                                                                                    | the Spark master URL                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| tests.resources                                      | object | `{}`                                                                                                                                        | configure the test pods resource requests and limits                                                                                                                                                                                                                                                                                                                                                                                                                   |
| tolerations                                          | list   | `[]`                                                                                                                                        | tolerations for pods assignment see: <https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/>                                                                                                                                                                                                                                                                                                                                                         |
| topologySpreadConstraints                            | list   | `[]`                                                                                                                                        | pod topology spread configuration see: <https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#api>                                                                                                                                                                                                                                                                                                                                       |
| warehouse.s3.credentials.accessKey                   | string | `""`                                                                                                                                        | access key for S3 (`fs.s3a.access.key`)                                                                                                                                                                                                                                                                                                                                                                                                                                |
| warehouse.s3.credentials.existingSecret.accessKeyKey | string | `"s3-access-key"`                                                                                                                           | name of the key inside the secret that refers to the access key                                                                                                                                                                                                                                                                                                                                                                                                        |
| warehouse.s3.credentials.existingSecret.name         | string | `""`                                                                                                                                        | name of an existing secret containing the access- and secret-key.                                                                                                                                                                                                                                                                                                                                                                                                      |
| warehouse.s3.credentials.existingSecret.secretKeyKey | string | `"s3-secret-key"`                                                                                                                           | name of the key inside the secret that refers to the secret key                                                                                                                                                                                                                                                                                                                                                                                                        |
| warehouse.s3.credentials.secretKey                   | string | `""`                                                                                                                                        | secret key for S3 (`fs.s3a.secret.key`)                                                                                                                                                                                                                                                                                                                                                                                                                                |
| warehouse.s3.endpoint                                | string | `""`                                                                                                                                        | S3 endpoint (`fs.s3a.endpoint`)                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| warehouse.url                                        | string | `"s3://pathling-warehouse"`                                                                                                                 | base URL at which Pathling will look for data files (`pathling.storage.warehouseUrl`).                                                                                                                                                                                                                                                                                                                                                                                 |

---

Autogenerated from chart metadata using [helm-docs v1.12.0](https://github.com/norwoodj/helm-docs/releases/v1.12.0)
